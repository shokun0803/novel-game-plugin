# copilot-instructions.md

## プロジェクト概要

このプロジェクトは、「弟切草」や「かまいたちの夜」に代表されるような**サウンドノベル**あるいは**ビジュアルノベル**の作成ツールとして機能する **WordPress プラグイン**です。  
ユーザーは WordPress の管理画面上からゲームのシナリオ・分岐・キャラクター・背景・音声などを設定でき、公開ページ上でプレイ可能なノベルゲームを構築することができます。  
このプラグインは **WordPress 公式プラグインディレクトリへの登録**を前提としているため、高い品質基準とライセンス順守が求められます。

## GitHub Copilot への指示

### ✅ コーディング規約に関する指示

- WordPress の[公式コーディング規約](https://developer.wordpress.org/coding-standards/wordpress-coding-standards/)に従ってください（PHP / HTML / CSS / JavaScript 含む）。
- PHP のインデントはスペース4つ、関数・変数・定数の命名にはスネークケースを使用。
- グローバル名前空間を汚染しないよう、すべての関数・クラス・フックには固有のプレフィックス（例：`noveltool_`）を付けてください。
- アクション・フィルターを使用する際には、正しい優先度と引数数を設定してください。

### ✅ ライセンスとセキュリティに関する指示

- すべてのコードは **GPLv2 互換ライセンス**に準拠してください。
- 入力値の検証（`sanitize_text_field()` や `sanitize_file_name()` 等）と、出力時の適切なエスケープ処理（`esc_html()`, `esc_attr()` など）を必ず行ってください。
- データベースへのクエリには `$wpdb->prepare()` を使用し、SQLインジェクションを防止してください。
- 管理画面における処理には `current_user_can()` による権限チェックを加えてください。

### ✅ コメント・ドキュメントに関する指示

- **すべてのコメントは日本語で記述**してください。
- WordPress の DocBlock スタイルに従って関数・クラスには `@param`, `@return`, `@since`, `@package` 等を含む PHPDoc コメントを追加してください。
- 他の開発者や将来の自分が理解しやすいように、コードの意図を明確に説明してください。

### ✅ 国際化・多言語対応

- すべての表示テキストには翻訳関数 `__()`, `_e()`, `_x()` などを使用してください。
- テキストドメインにはプラグイン固有のドメイン（例：`noveltool`）を使用してください。
- 翻訳用ファイル（.pot / .po / .mo）を生成することを前提とした設計にしてください。
